import "dotenv/config";
import "module-alias/register";
import { DatabaseManager } from "@database/DatabaseManager";
import { userMention } from "discord.js";

const ids = [
    "1221800878848213075",
    "386487942186795008",
    "447339599858106368",
    "652485506252406804",
    "384741262932049924",
    "452041256319582208",
    "553710267817787392",
    "360457586098700288",
    "183943559685079041",
    "1323799734460219412",
    "972201542004379728",
    "958028563934761051",
    "989491390167801916",
    "1401496718146539520",
    "516100971697537054",
    "688987607887118416",
    "370019626358407168",
    "1386208358566203553",
    "1096029748049760396",
    "462712800029048834",
    "1210501488309444659",
    "454165374263492608",
    "648129182962024479",
    "1006335248365277254",
    "1116662159410200626",
    "1384778154882764810",
    "419527989437661204",
    "1388270654922428466",
    "836394875658174474",
    "1363039586120503361",
    "938737455971053589",
    "1168659747227041884",
    "353995365688672259",
    "839398554808221707",
    "566158438636453898",
    "1063410473543946291",
    "1076005533376585758",
    "844756779040636928",
    "1237212067937914975",
    "335025362574770226",
    "583352998386729012",
    "748312584318615612",
    "510182690817835008",
    "1259143447462281344",
    "493000709470420996",
    "722687781586993227",
    "928924355952521266",
    "853611812842504192",
    "792500853428584510",
    "585748544330399746",
    "334689141541437440",
    "993414673821081700",
    "1009574602520940615",
    "734086313199796244",
    "876483013322604584",
    "776427056006692877",
    "1365923623331958836",
];

DatabaseManager.init().then(async () => {
    const binds = await DatabaseManager.elainaDb.collections.userBind.get(
        "discordid",
        { discordid: { $in: ids } },
        { projection: { discordid: 1, _id: 0 } }
    );

    const unbounds = ids.filter((id) => !binds.has(id));

    console.log("Unbound IDs:", unbounds.map(userMention).join(" "));

    process.exit(0);
});
